---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import PlotFormWrapper from '@/components/plots/PlotFormWrapper';

export const prerender = false;

// @ts-ignore - Astro.params works correctly in .astro files
const id = Astro.params.id;

if (!id) {
  return new Response(null, {
    status: 302,
    headers: { Location: '/plots' }
  });
}
---

<DashboardLayout 
  title="Editar Parcela - Smart Potato Leaf"
  description="Editar información de la parcela"
  activeRoute="parcelas"
>
  <div class="max-w-3xl mx-auto">
    <div class="mb-6">
      <a href={`/plots/${id}`} class="inline-flex items-center gap-2 text-primary hover:underline mb-4">
        <i class="fas fa-arrow-left"></i>
        Volver a detalles
      </a>
      <h1 class="text-2xl sm:text-3xl font-bold text-state-idle mb-2">Editar parcela</h1>
      <p class="text-state-disabled">Actualiza la información de la parcela</p>
    </div>

    <div class="bg-white rounded-lg border border-outline p-6">
      <PlotFormWrapper mode="edit" plotId={id} client:load />
    </div>
  </div>
</DashboardLayout>
