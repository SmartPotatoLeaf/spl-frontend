---
import DashboardLayout from '@/layouts/DashboardLayout.astro';
import PlotDetailView from '@/components/plots/PlotDetailView';
import AuthGuard from "@/components/shared/AuthGuard.tsx";

export const prerender = false;

// @ts-ignore - Astro.params works correctly in .astro files
const id = Astro.params.id;

if (!id) {
  return new Response(null, {
    status: 302,
    headers: { Location: '/plots' }
  });
}
---

<DashboardLayout
  title="Detalles de Parcela - Smart Potato Leaf"
  description="AnÃ¡lisis detallado de la parcela"
  activeRoute="parcelas"
>
  <AuthGuard client:load>
    <PlotDetailView plotId={id} client:load />
  </AuthGuard>
</DashboardLayout>
